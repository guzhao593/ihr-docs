(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{660:function(t,e,v){"use strict";v.r(e);var _=v(30),a=Object(_.a)({},(function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"git-分支设计规范"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#git-分支设计规范"}},[t._v("#")]),t._v(" Git 分支设计规范")]),t._v(" "),v("p",[t._v("这里分享 Git 分支设计规范，目的是提供给开发人员做参考。")]),t._v(" "),v("p",[t._v("在说 Git 分支规范之前，先说下在系统开发过程中常用的环境。")]),t._v(" "),v("h2",{attrs:{id:"常用的环境"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#常用的环境"}},[t._v("#")]),t._v(" 常用的环境")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("简称")]),t._v(" "),v("th",{staticStyle:{"text-align":"left"}},[t._v("全称")]),t._v(" "),v("th",{staticStyle:{"text-align":"left"}},[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("DEV")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("Development environment")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("开发环境, 开发自己使用")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("SIT")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("System Integration TestCase environment")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("系统集成测试环境, 内部测试")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("UAT")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("User Acceptance Test environment")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("用户接收测试环境, 用户测试")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("PRO")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("Production environment")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("生产环境, 正式环境")])])])]),t._v(" "),v("p",[t._v("比如，项目名域名为：http://www.sahara.com，那么相关环境域名可以这样进行配置：")]),t._v(" "),v("ul",[v("li",[t._v("DEV环境：　http://dev.sahara.com")]),t._v(" "),v("li",[t._v("SIT环境：　http://sit.sahara.com")]),t._v(" "),v("li",[t._v("UAT环境：　http://uat.sahara.com")]),t._v(" "),v("li",[t._v("PRO环境：　http://www.sahara.com")])]),t._v(" "),v("p",[t._v("接下来，针对不同环境来设计分支")]),t._v(" "),v("h2",{attrs:{id:"分支"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#分支"}},[t._v("#")]),t._v(" 分支")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("分支")]),t._v(" "),v("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),v("th",{staticStyle:{"text-align":"left"}},[t._v("环境")]),t._v(" "),v("th",{staticStyle:{"text-align":"left"}},[t._v("可访问")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("master")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("主分支")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("PRO")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("是")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("release")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("预上线分支")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("UAT")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("是")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("hotfix")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("紧急修复分支")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("DEV")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("否")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("sit")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("测试分支")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("SIT")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("是")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("dev")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("开发分支")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("DEV")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("是")])])])]),t._v(" "),v("h3",{attrs:{id:"master-分支"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#master-分支"}},[t._v("#")]),t._v(" master 分支")]),t._v(" "),v("p",[v("code",[t._v("master")]),t._v(" 为主分支，用于部署到正式环境（PRO），一般由 "),v("code",[t._v("release")]),t._v(" 或 "),v("code",[t._v("hotfix")]),t._v("  分支合并，任何情况下不允许直接在 "),v("code",[t._v("master")]),t._v(" 分支上修改代码。")]),t._v(" "),v("h3",{attrs:{id:"release-分支"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#release-分支"}},[t._v("#")]),t._v(" release 分支")]),t._v(" "),v("p",[v("code",[t._v("release")]),t._v(" 为预上线分支，用于部署到预上线环境（UAT），始终保持与 "),v("code",[t._v("master")]),t._v(" 分支一致，一般由 "),v("code",[t._v("develop")]),t._v(" 或 "),v("code",[t._v("hotfix")]),t._v(" 分支合并，不建议直接在 "),v("code",[t._v("release")]),t._v(" 分支上直接修改代码。")]),t._v(" "),v("p",[t._v("如果在 "),v("code",[t._v("release")]),t._v(" 分支测试出问题，需要回归验证 "),v("code",[t._v("develop")]),t._v(" 分支看否存在此问题。")]),t._v(" "),v("h3",{attrs:{id:"hotfix-分支"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#hotfix-分支"}},[t._v("#")]),t._v(" hotfix 分支")]),t._v(" "),v("p",[v("code",[t._v("hotfix")]),t._v(" 为紧急修复分支，命名规则为 "),v("code",[t._v("hotfix-")]),t._v(" 开头。")]),t._v(" "),v("p",[t._v("当线上出现紧急问题需要马上修复时，需要基于 "),v("code",[t._v("release")]),t._v(" 或 "),v("code",[t._v("master")]),t._v(" 分支创建 "),v("code",[t._v("hotfix")]),t._v(" 分支，修复完成后，再合并到 "),v("code",[t._v("release")]),t._v(" 或 "),v("code",[t._v("develop")]),t._v(" 分支，一旦修复上线，便将其删除。")]),t._v(" "),v("h3",{attrs:{id:"develop-分支"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#develop-分支"}},[t._v("#")]),t._v(" develop 分支")]),t._v(" "),v("p",[v("code",[t._v("develop")]),t._v(" 为测试分支，用于部署到测试环境（FAT），始终保持最新完成以及 bug 修复后的代码，可根据需求大小程度确定是由 feature 分支合并，还是直接在上面开发。")]),t._v(" "),v("p",[t._v("一定是满足测试的代码才能往上面合并或提交。")]),t._v(" "),v("h3",{attrs:{id:"feature-分支"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#feature-分支"}},[t._v("#")]),t._v(" feature 分支")]),t._v(" "),v("p",[v("code",[t._v("feature")]),t._v(" 为需求开发分支，命名规则为 "),v("code",[t._v("feature-")]),t._v(" 开头，一旦该需求上线，便将其删除。")]),t._v(" "),v("p",[t._v("这么说可能有点不容易理解，接下来举几个开发场景。")]),t._v(" "),v("h3",{attrs:{id:"开发场景"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#开发场景"}},[t._v("#")]),t._v(" 开发场景")]),t._v(" "),v("h4",{attrs:{id:"新需求加入"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#新需求加入"}},[t._v("#")]),t._v(" 新需求加入")]),t._v(" "),v("p",[t._v("有一个订单管理的新需求需要开发，首先要创建一个 "),v("code",[t._v("feature-order")]),t._v(" 分支，问题来了，该分支是基于哪个分支创建？")]),t._v(" "),v("p",[t._v("如果 存在 未测试完毕的需求，就基于 "),v("code",[t._v("master")]),t._v(" 创建。")]),t._v(" "),v("p",[t._v("如果 不存在 未测试完毕的需求，就基于 "),v("code",[t._v("develop")]),t._v(" 创建。")]),t._v(" "),v("p",[t._v("需求在 "),v("code",[t._v("feature-order")]),t._v(" 分支开发完毕，准备提测时，要先确定 "),v("code",[t._v("develop")]),t._v(" 不存在未测试完毕的需求，这时研发人员才能将将代码合并到 "),v("code",[t._v("develop")]),t._v(" （测试环境）供测试人员测试。")]),t._v(" "),v("p",[t._v("测试人员在 "),v("code",[t._v("develop")]),t._v(" （测试环境） 测试通过后，研发人员再将代码发布到 "),v("code",[t._v("release")]),t._v(" （预上线环境）供测试人员测试。")]),t._v(" "),v("p",[t._v("测试人员在 "),v("code",[t._v("release")]),t._v(" （预上线环境）测试通过后，研发人员再将代码发布到 "),v("code",[t._v("master")]),t._v(" （正式环境）供测试人员测试。")]),t._v(" "),v("p",[t._v("测试人员在 "),v("code",[t._v("master")]),t._v(" (正式环境) 测试通过后，研发人员需要删除 "),v("code",[t._v("feature-order")]),t._v(" 分支。")]),t._v(" "),v("h4",{attrs:{id:"普通迭代"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#普通迭代"}},[t._v("#")]),t._v(" 普通迭代")]),t._v(" "),v("p",[t._v("有一个订单管理的迭代需求，如果开发工时 < 1d，直接在 "),v("code",[t._v("develop")]),t._v(" 开发，如果开发工时 > 1d，那就需要创建分支，在分支上开发。")]),t._v(" "),v("p",[t._v("开发后的提测上线流程 与 新需求加入的流程一致。")]),t._v(" "),v("h4",{attrs:{id:"修复测试环境-bug"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#修复测试环境-bug"}},[t._v("#")]),t._v(" 修复测试环境 Bug")]),t._v(" "),v("p",[t._v("在 "),v("code",[t._v("develop")]),t._v(" 测试出现了Bug，如果修复工时 < 2h，直接在 "),v("code",[t._v("develop")]),t._v(" 修复，如果修复工时 > 2h，需要在分支上修复。\n修复后的提测上线流程 与 新需求加入的流程一致。")]),t._v(" "),v("h4",{attrs:{id:"修改预上线环境-bug"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#修改预上线环境-bug"}},[t._v("#")]),t._v(" 修改预上线环境 Bug")]),t._v(" "),v("p",[t._v("在 "),v("code",[t._v("release")]),t._v(" 测试出现了Bug，首先要回归下 "),v("code",[t._v("develop")]),t._v(" 分支是否同样存在这个问题。")]),t._v(" "),v("p",[t._v("如果存在，修复流程 与 修复测试环境 Bug流程一致。")]),t._v(" "),v("p",[t._v("如果不存在，这种可能性比较少，大部分是数据兼容问题，环境配置问题等。")]),t._v(" "),v("h4",{attrs:{id:"修改正式环境-bug"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#修改正式环境-bug"}},[t._v("#")]),t._v(" 修改正式环境 Bug")]),t._v(" "),v("p",[t._v("在 "),v("code",[t._v("master")]),t._v(" 测试出现了Bug，首先要回归下 "),v("code",[t._v("release")]),t._v(" 和 "),v("code",[t._v("develop")]),t._v(" 分支是否同样存在这个问题。")]),t._v(" "),v("p",[t._v("如果存在，修复流程 与 修复测试环境 Bug流程一致。")]),t._v(" "),v("p",[t._v("如果不存在，这种可能性也比较少，大部分是数据兼容问题，环境配置问题等。")]),t._v(" "),v("h4",{attrs:{id:"紧急修复正式环境-bug"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#紧急修复正式环境-bug"}},[t._v("#")]),t._v(" 紧急修复正式环境 Bug")]),t._v(" "),v("p",[t._v("需求在测试环节未测试出 Bug，上线运行一段时候后出现了 Bug，需要紧急修复的。")]),t._v(" "),v("p",[t._v("我个人理解紧急修复的意思是没时间验证测试环境了，但还是建议验证下预上线环境。")]),t._v(" "),v("p",[t._v("如果 "),v("code",[t._v("release")]),t._v(" 分支存在未测试完毕的需求，就基于 "),v("code",[t._v("master")]),t._v(" 创建 "),v("code",[t._v("hotfix-xxx")]),t._v(" 分支，修复完毕后发布到 "),v("code",[t._v("master")]),t._v(" 验证，验证完毕后，将 "),v("code",[t._v("master")]),t._v(" 代码合并到 "),v("code",[t._v("release")]),t._v(" 和 "),v("code",[t._v("develop")]),t._v(" 分支，同时删掉 "),v("code",[t._v("hotfix-xxx")]),t._v(" 分支。")]),t._v(" "),v("p",[t._v("如果 "),v("code",[t._v("release")]),t._v(" 分支不存在未测试完毕的需求，但 "),v("code",[t._v("develop")]),t._v(" 分支存在未测试完毕的需求，就基于 "),v("code",[t._v("release")]),t._v(" 创建 "),v("code",[t._v("hotfix-xxx")]),t._v(" 分支，修复完毕后发布到 "),v("code",[t._v("release")]),t._v(" 验证，后面流程与上线流程一致，验证完毕后，将 "),v("code",[t._v("master")]),t._v(" 代码合并到 "),v("code",[t._v("develop")]),t._v(" 分支，同时删掉 "),v("code",[t._v("hotfix-xxx")]),t._v(" 分支。")]),t._v(" "),v("p",[t._v("如果 "),v("code",[t._v("release")]),t._v(" 和 "),v("code",[t._v("develop")]),t._v(" 分支都不存在未测试完毕的需求， 就直接在 "),v("code",[t._v("develop")]),t._v(" 分支上修复完毕后，发布到 "),v("code",[t._v("release")]),t._v(" 验证，后面流程与上线流程一致。")]),t._v(" "),v("h4",{attrs:{id:"并行提测"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#并行提测"}},[t._v("#")]),t._v(" 并行提测")]),t._v(" "),v("p",[t._v("在一个项目中并行开发了两个需求，并行提测，但是上线日期不同。")]),t._v(" "),v("p",[t._v("我能想到的两种方案：")]),t._v(" "),v("p",[t._v("再部署一套可供测试人员测试的分支")]),t._v(" "),v("p",[t._v("使用 git cherry-pick “挑拣”提交")]),t._v(" "),v("p",[t._v("对于并行提测，你有好的方案吗？欢迎留言。")]),t._v(" "),v("h3",{attrs:{id:"commit-日志规范"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#commit-日志规范"}},[t._v("#")]),t._v(" Commit 日志规范")]),t._v(" "),v("p",[t._v("提交信息一定要认真填写！")]),t._v(" "),v("p",[t._v("建议参考规范：< type>(scope)：< subject>")]),t._v(" "),v("p",[t._v("比如：fix(首页模块)：修复弹窗 JS Bug。\ntype 表示 动作类型，可分为：")]),t._v(" "),v("ul",[v("li",[t._v("fix：修复 xxx Bug")]),t._v(" "),v("li",[t._v("feat：新增 xxx 功能")]),t._v(" "),v("li",[t._v("test：调试 xxx 功能")]),t._v(" "),v("li",[t._v("style：变更 xxx 代码格式或注释")]),t._v(" "),v("li",[t._v("docs：变更 xxx 文档")]),t._v(" "),v("li",[t._v("refactor：重构 xxx 功能或方法")])]),t._v(" "),v("p",[t._v("scope 表示 影响范围，可分为：模块、类库、方法等。\nsubject 表示 简短描述，最好不要超过 60 个字，如果有相关 Bug 的 Jira 号，建议在描述中加上。")])])}),[],!1,null,null,null);e.default=a.exports}}]);